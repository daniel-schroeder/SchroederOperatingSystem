<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="author"             content="Alan G. Labouseur" />
    <link rel="stylesheet" href="tsos.css" type="text/css" media="screen" />
    <title>
    DSOS - a browser-based virtual Operating System in TypeScript
    </title>

    <!-- Globals CONSTANTS and _Variables. Must included be first. -->
    <script type="text/javascript" src="distrib/globals.js"></script>

    <!-- Host (Virtual Machine / Hardware Simulation) Routines -->
    <script type="text/javascript" src="distrib/host/control.js"></script>
    <script type="text/javascript" src="distrib/host/devices.js"></script>
    <script type="text/javascript" src="distrib/host/cpu.js"></script>
    <script type="text/javascript" src="distrib/host/memory.js"></script>

    <!-- Virtual OS Routines: Make sure Kernel code is last, since it needs those above it. -->
    <script type="text/javascript" src="distrib/os/interrupt.js"></script>
    <script type="text/javascript" src="distrib/os/canvastext.js"></script>
    <script type="text/javascript" src="distrib/os/console.js"></script>
    <script type="text/javascript" src="distrib/os/deviceDriver.js"></script>
    <script type="text/javascript" src="distrib/os/deviceDriverKeyboard.js"></script>
    <script type="text/javascript" src="distrib/os/queue.js"></script>
    <script type="text/javascript" src="distrib/os/shell.js"></script>
    <script type="text/javascript" src="distrib/os/shellCommand.js"></script>
    <script type="text/javascript" src="distrib/os/userCommand.js"></script>
    <script type="text/javascript" src="distrib/os/kernel.js"></script>
    <script type="text/javascript" src="distrib/os/memoryManager.js"></script>
    <script type="text/javascript" src="distrib/os/processControlBlock.js"></script>

    <!-- Other Routines -->
    <script type="text/javascript" src="distrib/utils.js"></script>
    <!-- Uncomment the line below to enable GLaDOS testing. -->
    <!--<script type="text/javascript" src="http://alanclasses.github.io/TSOS/test/glados-ip2.js"></script>-->

</head>

<body onload="onDocumentLoad()">

    <div id="divMain" style="width:100%;">

        <div id="divButtonBar" style="margin:4px; max-width:550px;">
            <input type="button"
                id = "btnStartOS"
                name="brnStartOS"
                class="normal_button"
                value="Start"
                tabindex="0"
                onclick="TSOS.Control.hostBtnStartOS_click(this);">

            <input type="button"
                id = "btnHaltOS"
                name="brnHaltOS"
                class="normal_button"
                disabled="disabled"
                value="Halt"
                tabindex="1"
                onclick="TSOS.Control.hostBtnHaltOS_click(this);">

            <input type="button"
                id = "btnReset"
                name="brnReset"
                class="normal_button"
                disabled="disabled"
                value="Reset"
                tabindex="2"
                onclick="TSOS.Control.hostBtnReset_click(this);">

            <input type="button"
                id = "btnSingleStep"
                name="brnSingleStep"
                class="normal_button"
                disabled="disabled"
                value="Single Step"
                tabindex="3"
                onclick="TSOS.Control.hostBtnSingleStep_click(this);">

            <input type="button"
                id = "btnStep"
                name="brnStep"
                class="small_button"
                disabled="disabled"
                value=">>"
                tabindex="4"
                onclick="TSOS.Control.hostBtnStep_click(this);">
        </div>

        <div id="container" style="display:flex; justify-content:space-between;">
            <div id=column1>
                <div id="divConsole" style="margin:4px; width:500px; height:500px;">
                    <canvas id="display"
                        width="500px"
                        height="500px"
                        tabindex="3">
                    </canvas>
                </div>
            </div>

            <div id="column2">
                <div id="divLog" style="max-width:400px;">
                    <label>
                        Host Log
                        <br>
                        <textarea name="taHostLog"
                            id  ="taHostLog"
                            rows="26"
                            cols="48">
                        </textarea>
                    </label>
                </div>

                <div id="divUserProgramInput" style="max-width:400px;">
                    <label>
                        User Program Input
                        <br>
                        <textarea name="taProgramInput" id  ="taProgramInput" rows="8" cols="48"></textarea>
                    </label>
                </div>
            </div>

            <div id="column3">
                <div id="divCPUStatus" style="max-width:400px;">
                    <label>
                        CPU Status
                        <br>
                        <div id="cpuTable" style="overflow:hidden;max-height:140px; width:400px;">
                            <table id="tableCPU" style="border: 1px solid black; border-collapse:collapse;">
                                <tr>
                                    <th class="thCPU">PC</th>
                                    <th class="thCPU">Intsruction</th>
                                    <th class="thCPU">Acc</th>
                                    <th class="thCPU">XReg</th>
                                    <th class="thCPU">YReg</th>
                                    <th class="thCPU">ZFlag</th>
                                </tr>
                                <tr>
                                    <td class="tdCPU" id="cpuPC">--</td>
                                    <td class="tdCPU" id="cpuInstruction">--</td>
                                    <td class="tdCPU" id="cpuAcc">--</td>
                                    <td class="tdCPU" id="cpuX">--</td>
                                    <td class="tdCPU" id="cpuY">--</td>
                                    <td class="tdCPU" id="cpuZ">--</td>
                                </tr>
                            </table>
                        </div>
                    </label>
                </div>

                <div id="divMemory" style="margin-top:10px;">
                    <label>
                        Memory
                        <br>
                        <div id"memoryTable" style="max-height:140px; overflow-y:scroll; overflow-x:hidden;">
                            <table id="tableMem" style="border: 1px solid black; border-collapse:collapse;">
                                <tr>
                                    <th>0x000</th>
                                    <td class="tdMem" id="0">00</td>
                                    <td class="tdMem" id="1">00</td>
                                    <td class="tdMem" id="2">00</td>
                                    <td class="tdMem" id="3">00</td>
                                    <td class="tdMem" id="4">00</td>
                                    <td class="tdMem" id="5">00</td>
                                    <td class="tdMem" id="6">00</td>
                                    <td class="tdMem" id="7">00</td>
                                </tr>
                                <tr>
                                    <th>0x008</th>
                                    <td class="tdMem" id="8">00</td>
                                    <td class="tdMem" id="9">00</td>
                                    <td class="tdMem" id="10">00</td>
                                    <td class="tdMem" id="11">00</td>
                                    <td class="tdMem" id="12">00</td>
                                    <td class="tdMem" id="13">00</td>
                                    <td class="tdMem" id="14">00</td>
                                    <td class="tdMem" id="15">00</td>
                                </tr>
                                <tr>
                                    <th>0x010</th>
                                    <td class="tdMem" id="16">00</td>
                                    <td class="tdMem" id="17">00</td>
                                    <td class="tdMem" id="18">00</td>
                                    <td class="tdMem" id="19">00</td>
                                    <td class="tdMem" id="20">00</td>
                                    <td class="tdMem" id="21">00</td>
                                    <td class="tdMem" id="22">00</td>
                                    <td class="tdMem" id="23">00</td>
                                </tr>
                                <tr>
                                    <th>0x018</th>
                                    <td class="tdMem" id="24">00</td>
                                    <td class="tdMem" id="25">00</td>
                                    <td class="tdMem" id="26">00</td>
                                    <td class="tdMem" id="27">00</td>
                                    <td class="tdMem" id="28">00</td>
                                    <td class="tdMem" id="29">00</td>
                                    <td class="tdMem" id="30">00</td>
                                    <td class="tdMem" id="31">00</td>
                                </tr>
                                <tr>
                                    <th>0x020</th>
                                    <td class="tdMem" id="32">00</td>
                                    <td class="tdMem" id="33">00</td>
                                    <td class="tdMem" id="34">00</td>
                                    <td class="tdMem" id="35">00</td>
                                    <td class="tdMem" id="36">00</td>
                                    <td class="tdMem" id="37">00</td>
                                    <td class="tdMem" id="38">00</td>
                                    <td class="tdMem" id="39">00</td>
                                </tr>
                                <tr>
                                    <th>0x028</th>
                                    <td class="tdMem" id="40">00</td>
                                    <td class="tdMem" id="41">00</td>
                                    <td class="tdMem" id="42">00</td>
                                    <td class="tdMem" id="43">00</td>
                                    <td class="tdMem" id="44">00</td>
                                    <td class="tdMem" id="45">00</td>
                                    <td class="tdMem" id="46">00</td>
                                    <td class="tdMem" id="47">00</td>
                                </tr>
                                <tr>
                                    <th>0x030</th>
                                    <td class="tdMem" id="48">00</td>
                                    <td class="tdMem" id="49">00</td>
                                    <td class="tdMem" id="50">00</td>
                                    <td class="tdMem" id="51">00</td>
                                    <td class="tdMem" id="52">00</td>
                                    <td class="tdMem" id="53">00</td>
                                    <td class="tdMem" id="54">00</td>
                                    <td class="tdMem" id="55">00</td>
                                </tr>
                                <tr>
                                    <th>0x038</th>
                                    <td class="tdMem" id="56">00</td>
                                    <td class="tdMem" id="57">00</td>
                                    <td class="tdMem" id="58">00</td>
                                    <td class="tdMem" id="59">00</td>
                                    <td class="tdMem" id="60">00</td>
                                    <td class="tdMem" id="61">00</td>
                                    <td class="tdMem" id="62">00</td>
                                    <td class="tdMem" id="63">00</td>
                                </tr>
                                <tr>
                                    <th>0x040</th>
                                    <td class="tdMem" id="64">00</td>
                                    <td class="tdMem" id="65">00</td>
                                    <td class="tdMem" id="66">00</td>
                                    <td class="tdMem" id="67">00</td>
                                    <td class="tdMem" id="68">00</td>
                                    <td class="tdMem" id="69">00</td>
                                    <td class="tdMem" id="70">00</td>
                                    <td class="tdMem" id="71">00</td>
                                </tr>
                                <tr>
                                    <th>0x048</th>
                                    <td class="tdMem" id="72">00</td>
                                    <td class="tdMem" id="73">00</td>
                                    <td class="tdMem" id="74">00</td>
                                    <td class="tdMem" id="75">00</td>
                                    <td class="tdMem" id="76">00</td>
                                    <td class="tdMem" id="77">00</td>
                                    <td class="tdMem" id="78">00</td>
                                    <td class="tdMem" id="79">00</td>
                                </tr>
                                <tr>
                                    <th>0x050</th>
                                    <td class="tdMem" id="80">00</td>
                                    <td class="tdMem" id="81">00</td>
                                    <td class="tdMem" id="82">00</td>
                                    <td class="tdMem" id="83">00</td>
                                    <td class="tdMem" id="84">00</td>
                                    <td class="tdMem" id="85">00</td>
                                    <td class="tdMem" id="86">00</td>
                                    <td class="tdMem" id="87">00</td>
                                </tr>
                                <tr>
                                    <th>0x058</th>
                                    <td class="tdMem" id="88">00</td>
                                    <td class="tdMem" id="89">00</td>
                                    <td class="tdMem" id="90">00</td>
                                    <td class="tdMem" id="91">00</td>
                                    <td class="tdMem" id="92">00</td>
                                    <td class="tdMem" id="93">00</td>
                                    <td class="tdMem" id="94">00</td>
                                    <td class="tdMem" id="95">00</td>
                                </tr>
                                <tr>
                                    <th>0x060</th>
                                    <td class="tdMem" id="96">00</td>
                                    <td class="tdMem" id="97">00</td>
                                    <td class="tdMem" id="98">00</td>
                                    <td class="tdMem" id="99">00</td>
                                    <td class="tdMem" id="100">00</td>
                                    <td class="tdMem" id="101">00</td>
                                    <td class="tdMem" id="102">00</td>
                                    <td class="tdMem" id="103">00</td>
                                </tr>
                                <tr>
                                    <th>0x068</th>
                                    <td class="tdMem" id="104">00</td>
                                    <td class="tdMem" id="105">00</td>
                                    <td class="tdMem" id="106">00</td>
                                    <td class="tdMem" id="107">00</td>
                                    <td class="tdMem" id="108">00</td>
                                    <td class="tdMem" id="109">00</td>
                                    <td class="tdMem" id="110">00</td>
                                    <td class="tdMem" id="111">00</td>
                                </tr>
                                <tr>
                                    <th>0x070</th>
                                    <td class="tdMem" id="112">00</td>
                                    <td class="tdMem" id="113">00</td>
                                    <td class="tdMem" id="114">00</td>
                                    <td class="tdMem" id="115">00</td>
                                    <td class="tdMem" id="116">00</td>
                                    <td class="tdMem" id="117">00</td>
                                    <td class="tdMem" id="118">00</td>
                                    <td class="tdMem" id="119">00</td>
                                </tr>
                                <tr>
                                    <th>0x078</th>
                                    <td class="tdMem" id="120">00</td>
                                    <td class="tdMem" id="121">00</td>
                                    <td class="tdMem" id="122">00</td>
                                    <td class="tdMem" id="123">00</td>
                                    <td class="tdMem" id="124">00</td>
                                    <td class="tdMem" id="125">00</td>
                                    <td class="tdMem" id="126">00</td>
                                    <td class="tdMem" id="127">00</td>
                                </tr>
                                <tr>
                                    <th>0x080</th>
                                    <td class="tdMem" id="128">00</td>
                                    <td class="tdMem" id="129">00</td>
                                    <td class="tdMem" id="130">00</td>
                                    <td class="tdMem" id="131">00</td>
                                    <td class="tdMem" id="132">00</td>
                                    <td class="tdMem" id="133">00</td>
                                    <td class="tdMem" id="134">00</td>
                                    <td class="tdMem" id="135">00</td>
                                </tr>
                                <tr>
                                    <th>0x088</th>
                                    <td class="tdMem" id="136">00</td>
                                    <td class="tdMem" id="137">00</td>
                                    <td class="tdMem" id="138">00</td>
                                    <td class="tdMem" id="139">00</td>
                                    <td class="tdMem" id="140">00</td>
                                    <td class="tdMem" id="141">00</td>
                                    <td class="tdMem" id="142">00</td>
                                    <td class="tdMem" id="143">00</td>
                                </tr>
                                <tr>
                                    <th>0x090</th>
                                    <td class="tdMem" id="144">00</td>
                                    <td class="tdMem" id="145">00</td>
                                    <td class="tdMem" id="146">00</td>
                                    <td class="tdMem" id="147">00</td>
                                    <td class="tdMem" id="148">00</td>
                                    <td class="tdMem" id="149">00</td>
                                    <td class="tdMem" id="150">00</td>
                                    <td class="tdMem" id="151">00</td>
                                </tr>
                                <tr>
                                    <th>0x098</th>
                                    <td class="tdMem" id="152">00</td>
                                    <td class="tdMem" id="153">00</td>
                                    <td class="tdMem" id="154">00</td>
                                    <td class="tdMem" id="155">00</td>
                                    <td class="tdMem" id="156">00</td>
                                    <td class="tdMem" id="157">00</td>
                                    <td class="tdMem" id="158">00</td>
                                    <td class="tdMem" id="159">00</td>
                                </tr>
                                <tr>
                                    <th>0x0A0</th>
                                    <td class="tdMem" id="160">00</td>
                                    <td class="tdMem" id="161">00</td>
                                    <td class="tdMem" id="162">00</td>
                                    <td class="tdMem" id="163">00</td>
                                    <td class="tdMem" id="164">00</td>
                                    <td class="tdMem" id="165">00</td>
                                    <td class="tdMem" id="166">00</td>
                                    <td class="tdMem" id="167">00</td>
                                </tr>
                                <tr>
                                    <th>0x0A8</th>
                                    <td class="tdMem" id="168">00</td>
                                    <td class="tdMem" id="169">00</td>
                                    <td class="tdMem" id="170">00</td>
                                    <td class="tdMem" id="171">00</td>
                                    <td class="tdMem" id="172">00</td>
                                    <td class="tdMem" id="173">00</td>
                                    <td class="tdMem" id="174">00</td>
                                    <td class="tdMem" id="175">00</td>
                                </tr>
                                <tr>
                                    <th>0x0B0</th>
                                    <td class="tdMem" id="176">00</td>
                                    <td class="tdMem" id="177">00</td>
                                    <td class="tdMem" id="178">00</td>
                                    <td class="tdMem" id="179">00</td>
                                    <td class="tdMem" id="180">00</td>
                                    <td class="tdMem" id="181">00</td>
                                    <td class="tdMem" id="182">00</td>
                                    <td class="tdMem" id="183">00</td>
                                </tr>
                                <tr>
                                    <th>0x0B8</th>
                                    <td class="tdMem" id="184">00</td>
                                    <td class="tdMem" id="185">00</td>
                                    <td class="tdMem" id="186">00</td>
                                    <td class="tdMem" id="187">00</td>
                                    <td class="tdMem" id="188">00</td>
                                    <td class="tdMem" id="189">00</td>
                                    <td class="tdMem" id="190">00</td>
                                    <td class="tdMem" id="191">00</td>
                                </tr>
                                <tr>
                                    <th>0x0C0</th>
                                    <td class="tdMem" id="192">00</td>
                                    <td class="tdMem" id="193">00</td>
                                    <td class="tdMem" id="194">00</td>
                                    <td class="tdMem" id="195">00</td>
                                    <td class="tdMem" id="196">00</td>
                                    <td class="tdMem" id="197">00</td>
                                    <td class="tdMem" id="198">00</td>
                                    <td class="tdMem" id="199">00</td>
                                </tr>
                                <tr>
                                    <th>0x0C8</th>
                                    <td class="tdMem" id="200">00</td>
                                    <td class="tdMem" id="201">00</td>
                                    <td class="tdMem" id="202">00</td>
                                    <td class="tdMem" id="203">00</td>
                                    <td class="tdMem" id="204">00</td>
                                    <td class="tdMem" id="205">00</td>
                                    <td class="tdMem" id="206">00</td>
                                    <td class="tdMem" id="207">00</td>
                                </tr>
                                <tr>
                                    <th>0x0D0</th>
                                    <td class="tdMem" id="208">00</td>
                                    <td class="tdMem" id="209">00</td>
                                    <td class="tdMem" id="210">00</td>
                                    <td class="tdMem" id="211">00</td>
                                    <td class="tdMem" id="212">00</td>
                                    <td class="tdMem" id="213">00</td>
                                    <td class="tdMem" id="214">00</td>
                                    <td class="tdMem" id="215">00</td>
                                </tr>
                                <tr>
                                    <th>0x0D8</th>
                                    <td class="tdMem" id="216">00</td>
                                    <td class="tdMem" id="217">00</td>
                                    <td class="tdMem" id="218">00</td>
                                    <td class="tdMem" id="219">00</td>
                                    <td class="tdMem" id="220">00</td>
                                    <td class="tdMem" id="221">00</td>
                                    <td class="tdMem" id="222">00</td>
                                    <td class="tdMem" id="223">00</td>
                                </tr>
                                <tr>
                                    <th>0x0E0</th>
                                    <td class="tdMem" id="224">00</td>
                                    <td class="tdMem" id="225">00</td>
                                    <td class="tdMem" id="226">00</td>
                                    <td class="tdMem" id="227">00</td>
                                    <td class="tdMem" id="228">00</td>
                                    <td class="tdMem" id="229">00</td>
                                    <td class="tdMem" id="230">00</td>
                                    <td class="tdMem" id="231">00</td>
                                </tr>
                                <tr>
                                    <th>0x0E8</th>
                                    <td class="tdMem" id="232">00</td>
                                    <td class="tdMem" id="233">00</td>
                                    <td class="tdMem" id="234">00</td>
                                    <td class="tdMem" id="235">00</td>
                                    <td class="tdMem" id="236">00</td>
                                    <td class="tdMem" id="237">00</td>
                                    <td class="tdMem" id="238">00</td>
                                    <td class="tdMem" id="239">00</td>
                                </tr>
                                <tr>
                                    <th>0x0F0</th>
                                    <td class="tdMem" id="240">00</td>
                                    <td class="tdMem" id="241">00</td>
                                    <td class="tdMem" id="242">00</td>
                                    <td class="tdMem" id="243">00</td>
                                    <td class="tdMem" id="244">00</td>
                                    <td class="tdMem" id="245">00</td>
                                    <td class="tdMem" id="246">00</td>
                                    <td class="tdMem" id="247">00</td>
                                </tr>
                                <tr>
                                    <th>0x0F8</th>
                                    <td class="tdMem" id="248">00</td>
                                    <td class="tdMem" id="249">00</td>
                                    <td class="tdMem" id="250">00</td>
                                    <td class="tdMem" id="251">00</td>
                                    <td class="tdMem" id="252">00</td>
                                    <td class="tdMem" id="253">00</td>
                                    <td class="tdMem" id="254">00</td>
                                    <td class="tdMem" id="255">00</td>
                                </tr>
                            </table>
                        </div>
                    </label>
                </div>

                <div id="divPCB" style="margin-top:10px;">
                    <label>
                        PCB
                        <br>
                        <div id="pcbTable" style="overflow-x:hidden; overflow-y:scroll;max-height:140px">
                            <table id="tablePCB" style="border: 1px solid black; border-collapse:collapse;">
                                <tr>
                                    <th class="thPCB">PID</th>
                                    <th class="thPCB">State</th>
                                    <th class="thPCB">PC</th>
                                    <th class="thPCB">Intsruction</th>
                                    <th class="thPCB">Acc</th>
                                    <th class="thPCB">XReg</th>
                                    <th class="thPCB">YReg</th>
                                    <th class="thPCB">ZFlag</th>
                                </tr>
                                <tr>
                                    <td class="tdPCB" id="pcbPID">--</td>
                                    <td class="tdPCB" id="pcbState">--</td>
                                    <td class="tdPCB" id="pcbPC">--</td>
                                    <td class="tdPCB" id="pcbInstruction">--</td>
                                    <td class="tdPCB" id="pcbAcc">--</td>
                                    <td class="tdPCB" id="pcbXreg">--</td>
                                    <td class="tdPCB" id="pcbYreg">--</td>
                                    <td class="tdPCB" id="pcbZflag">--</td>
                                </tr>
                            </table>
                        </div>
                    </label>
                </div>
            </div>
        </div>

        <div id="divStatusArea" style="margin:auto; width:250px; text-align:center;padding-top:10px;">
            <div id='date'>
                <script>
                    var today = new Date();
                    var days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']
                    var months = ['January','February','March','April','May','June','July','August','September','October','November','December']
                    var date = (days[today.getDay()] + " " + months[today.getMonth()] + " " + today.getDate() + "th, " + today.getFullYear());
                    document.getElementById("date").innerHTML = date;
                </script>
            </div>
            <div id="time">
                <script>
                    function now() {
                        var today = new Date();
                        var amPM = 'AM';
                        if (today.getSeconds() < 10) {
                            var seconds = "0" + today.getSeconds();
                        }
                        else {
                            var seconds = "" + today.getSeconds();
                        }

                        if (today.getMinutes() < 10) {
                            var minutes = "0" + today.getMinutes();
                        }
                        else {
                            var minutes = "" + today.getMinutes();
                        }

                        if (hours == 12) {
                            amPM = 'PM';
                        }
                        if (today.getHours() > 12) {
                            var hours = today.getHours() - 12;
                            amPM = 'PM';
                        }
                        else {
                            var hours = today.getHours();
                        }

                        var currentTime = hours + ":" + minutes + ":" + seconds + " " + amPM
                        document.getElementById("time").innerHTML = currentTime;
                    }
                    now();
                    setInterval(now,1000);
                </script>
            </div>
            <div id="status" style="padding-top:10px;">
                Status: Unknown
            </div>
        </div>
    </div>

    <p class="footerText" style="clear:both;">
        <br>
        Copyright &copy; 2008 - 2016 No Rights Reserved.
        <br>
        Reproduction is inhibited without the express written consent of
        Ted Codd, Stevie Ray Vaughan, and Ian Fleming.
    </p>

</body>
</html>
